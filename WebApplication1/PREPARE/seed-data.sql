-- Очистка таблиц (опционально, если нужно сбросить данные)
-- TRUNCATE TABLE messages, orders, users RESTART IDENTITY;

-- Вставка тестовых пользователей
INSERT INTO users (id, name, is_vip) VALUES
(1, 'Иван Петров', false),
(2, 'Мария Сидорова', false),
(3, 'Алексей Иванов', false),
(4, 'Елена Смирнова', false)
ON CONFLICT (id) DO UPDATE SET 
    name = EXCLUDED.name,
    is_vip = EXCLUDED.is_vip;

-- Вставка заказов для пользователя 1 (с крупным заказом > 1000)
INSERT INTO orders (user_id, total) VALUES
(1, 500.00),
(1, 1200.00), -- Крупный заказ > 1000
(1, 300.00),
(1, 800.00);

-- Вставка заказов для пользователя 2 (без крупных заказов)
INSERT INTO orders (user_id, total) VALUES
(2, 200.00),
(2, 350.00),
(2, 450.00);

-- Вставка заказов для пользователя 3 (только мелкие заказы)
INSERT INTO orders (user_id, total) VALUES
(3, 150.00),
(3, 250.00);

-- Вставка заказов для пользователя 4 (несколько крупных заказов)
INSERT INTO orders (user_id, total) VALUES
(4, 1500.00), -- Крупный заказ > 1000
(4, 2500.00), -- Крупный заказ > 1000
(4, 900.00);

-- Вставка сообщений (непрочитанные и прочитанные)
INSERT INTO messages (touserid, content, isread) VALUES
-- Для пользователя 1: 3 непрочитанных, 1 прочитанное
(1, 'Привет, Иван! Как дела?', false),
(1, 'Ваш заказ №123 готов к выдаче', false),
(1, 'Напоминание об оплате', false),
(1, 'Спасибо за отзыв!', true),

-- Для пользователя 2: все сообщения прочитаны
(2, 'Мария, добрый день!', true),
(2, 'Ваша доставка задерживается', true),

-- Для пользователя 3: 1 непрочитанное
(3, 'Алексей, проверьте новый функционал', false),

-- Для пользователя 4: 2 непрочитанных, 1 прочитанное
(4, 'Елена, у нас акция для VIP клиентов!', false),
(4, 'Ваш запрос обработан', true),
(4, 'Приглашение на вебинар', false);